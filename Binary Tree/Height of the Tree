import java.util.*;

class Node {
    int data;
    Node left;
    Node right;

    Node(int a) {
        data = a;
        left = null;
        right = null;
    }
}

class Main {
    static Node head;

    static void insert(Scanner sc) {
        Queue<Node> queue = new LinkedList<>();
        int x = sc.nextInt();
        if (x != -1) {
            head = new Node(x);
            queue.add(head);
        }
        while (!queue.isEmpty()) {
            Node temp = queue.poll();
            x = sc.nextInt();
            if (x != -1) {
                temp.left = new Node(x);
                queue.add(temp.left);
            }
            int y = sc.nextInt();
            if (y != -1) {
                temp.right = new Node(y);
                queue.add(temp.right);
            }
        }
    }
    static int height(Node temp)
    {
        if(temp==null)
        {
            return 0;
        }
        else
        {
            return 1+Math.max(height(temp.left), height(temp.right));
        }
    }

    static void inorder(Node node) {
        if (node == null) return;
        inorder(node.left);
        System.out.print(node.data + " ");
        inorder(node.right);
    }

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        insert(sc);
        inorder(head);
        System.out.println();
        System.out.println(height(head));
    }
}
